openapi: 3.0.1
info:
  title: OpenWiFi Provisioning Model
  description: Definitions and APIs to manages an OpenWiFi network.
  version: 2.1.0
  license:
    name: BSD3
    url: https://github.com/Telecominfraproject/wlan-cloud-ucentralgw/blob/master/LICENSE

servers:
  - url: 'https://localhost:16005/api/v1'

security:
  - bearerAuth: []
  - ApiKeyAuth: []

components:
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-API-KEY
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  responses:
    NotFound:
      description: The specified resource was not found.
      content:
        application/json:
          schema:
            properties:
              ErrorCode:
                type: integer
              ErrorDetails:
                type: string
              ErrorDescription:
                type: string

    Unauthorized:
      description: The requested does not have sufficient rights to perform the operation.
      content:
        application/json:
          schema:
            properties:
              ErrorCode:
                type: integer
              ErrorDetails:
                type: string
              ErrorDescription:
                type: string

    Success:
      description: The requested operation was performed.
      content:
        application/json:
          schema:
            properties:
              Operation:
                type: string
              Details:
                type: string
              Code:
                type: integer

  schemas:

    ObjectInfo:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string
        notes:
          type: array
          items:
            $ref: '#/components/schemas/NoteInfo'
        created:
          type: integer
          format: int64
        modified:
          type: integer
          format: int64
        tags:
          type: array
          items:
            type: integer
            format: int64

    # uuids: mpe:<uuid>
    ManagementPolicyEntry:
      type: object
      properties:
        users:
          type: array
          items:
            type: string
        resources:
          description: this is a list of UUID and UUID Patterns to control by this policy
          type: array
          items:
            type: string
        access:
          type: array
          items:
            type: string
            enum:
              - NOACCESS
              - READ
              - MODIFY
              - DELETE
              - LIST
              - CREATE
              - FULL
        policy:
          description: A JSON document describing the policy
          type: string

    # uuids: mpp:<uuid>
    ManagementPolicy:
      type: object
      properties:
        allOf:
          $ref: '#/components/schemas/ObjectInfo'
        entries:
          type: array
          items:
            $ref: '#/components/schemas/ManagementPolicyEntry'
        inUse:
          type: array
          items:
            type: string
            format: uuid
            example: each uuid is preceded by ent, or ven to say that the elemenet is entity or venue

    ManagementPolicyList:
      type: object
      properties:
        policies:
          type: array
          items:
            $ref: '#/components/schemas/ManagementPolicy'

    # uuids: ent:<uuid>
    Entity:
      type: object
      properties:
        allOf:
          $ref: '#/components/schemas/ObjectInfo'
        parent:
          description: If empty, then this is the root entity, otherwise this points to a parent entity
          type: string
          format: uuid
        children:
          type: array
          items:
            type: string
            format: uuid
        venues:
          description: The list of UUID of the venues for this entity
          type: array
          items:
            type: string
            format: uuid
        contacts:
          description: The list of UUID of the contacts for the entity
          type: array
          items:
            type: string
            format: uuid
        locations:
          description: The list of UUID of the locations associated with thit entiry
          type: array
          items:
            type: string
            format: uuid
        managementPolicy:
          type: string
          format: uuid
        deviceConfiguration:
          type: string
          format: uuid
        devices:
          type: array
          items:
            type: string
            format: uuid
        rrm:
          type: string
          enum:
            - off
            - on
            - inherit

    EntityList:
      type: object
      properties:
        entities:
          type: array
          items:
            $ref: '#/components/schemas/Entity'

    DiGraphEntry:
      type: object
      properties:
        parent:
          type: string
          format: uuid
        child:
          type: string
          format: uuid

    DiGraph:
      type: array
      items:
        $ref: '#/components/schemas/DiGraphEntry'

    # uuids: ven:<uuid>
    Venue:
      type: object
      properties:
        allOf:
          $ref: '#/components/schemas/ObjectInfo'
        entity:
          type: string
          format: uuid
        parent:
          type: string
          format: uuid
        children:
          type: array
          items:
            type: string
            format: uuid
        managementPolicy:
          type: string
          format: uuid
        devices:
          type: array
          items:
            type: string
            format: uuid
        topology:
          $ref: '#/components/schemas/DiGraph'
        design:
          type: string
        deviceConfiguration:
          type: string
          format: uuid
        contact:
          type: string
          format: uuid
        location:
          type: string
          format: uuid
        rrm:
          type: string
          enum:
            - off
            - on
            - inherit

    VenueList:
      type: object
      properties:
        venues:
          type: array
          items:
            $ref: '#/components/schemas/Venue'

    UserInfoDigest:
      type: object
      properties:
        id:
          type: string
          format: uuid
        loginId:
          type: string
        type:
          type: string

    # uuids: mgg:<uuid>
    ManagementRole:
      type: object
      properties:
        allOf:
          $ref: '#/components/schemas/ObjectInfo'
        managementPolicy:
          type: string
          format: uuid
        users:
          type: array
          items:
            type: string
            format: uuid
        inUse:
          type: array
          items:
            type: string
            format: uuid
            example: each uuid is preceded by ent, or ven to say that the elemenet is entity or venue

    ManagementRoleList:
      type: object
      properties:
        roles:
          type: array
          items:
            $ref: '#/components/schemas/ManagementRole'

    # uuids: loc:<uuid>
    Location:
      type: object
      properties:
        allOf:
          $ref: '#/components/schemas/ObjectInfo'
        type:
          type: string
          enum:
            - SERVICE
            - EQUIPMENT
            - AUTO
            - MANUAL
            - SPECIAL
            - UNKNOWN
            - CORPORATE
        buildingName:
          type: string
        addressLines:
          type: array
          items:
            type: string
        city:
          type: string
        state:
          type: string
        postal:
          type: string
        country:
          type: string
        phones:
          type: array
          items:
            type: string
        mobiles:
          type: array
          items:
            type: string
        inUse:
          type: array
          items:
            type: string
            format: uuid
            example: each uuid is preceded by ent, or ven to say that the elemenet is entity or venue

    LocationList:
      type: object
      properties:
        locations:
          type: array
          items:
            $ref: '#/components/schemas/Location'

    # uuids: con:<uuid>
    Contact:
      type: object
      properties:
        allOf:
          $ref: '#/components/schemas/ObjectInfo'
        type:
          type: string
          enum:
            - SUBSCRIBER
            - USER
            - INSTALLER
            - CSR
            - MANAGER
            - BUSINESSOWNER
            - TECHNICIAN
            - CORPORATE
        title:
          type: string
        salutation:
          type: string
        firstname:
          type: string
        lastname:
          type: string
        initials:
          type: string
        visual:
          type: string
        phones:
          type: array
          items:
            type: string
        mobiles:
          type: array
          items:
            type: string
        primaryEmail:
          type: string
        secondaryEmail:
          type: string
        accessPIN:
          type: string
        inUse:
          type: array
          items:
            type: string
            format: uuid

    ContactList:
      type: object
      properties:
        contacts:
          type: array
          items:
            $ref: '#/components/schemas/Contact'

    DeviceConfigurationElement:
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        weight:
          type: integer
        configuration:
          type: string

    DeviceConfiguration:
      type: object
      properties:
        allOf:
          $ref: '#/components/schemas/ObjectInfo'
        managementPolicy:
          type: string
          format: uuid
        deviceTypes:
          type: array
          items:
            type: string
        configuration:
          type: array
          items:
            $ref: '#/components/schemas/DeviceConfigurationElement'
        variables:
          type: array
          items:
            $ref: '#/components/schemas/TagValuePairList'
        inUse:
          type: array
          items:
            type: string
            format: uuid
        rrm:
          type: string
          enum:
            - off
            - on
            - inherit

    DeviceConfigurationList:
      type: object
      properties:
        configurations:
          type: array
          items:
            $ref: '#/components/schemas/DeviceConfiguration'

    InventoryTag:
      type: object
      properties:
        allOf:
          $ref: '#/components/schemas/ObjectInfo'
        serialNumber:
          type: string
        deviceType:
          type: string
        venue:
          type: string
          format: uuid
        entity:
          type: string
          format: uuid
        qrCode:
          type: string
        geoCode:
          type: string
        location:
          type: string
          format: uuid
        contact:
          type: string
          format: uuid
        deviceConfiguration:
          type: string
          format: uuid
        rrm:
          type: string
          enum:
            - off
            - on
            - inherit

    InventoryTagList:
      type: object
      properties:
        tags:
          type: array
          items:
            $ref: '#/components/schemas/InventoryTag'

    SerialNumberList:
      type: object
      properties:
        serialNumbers:
          type: array
          items:
            type: string

    CountAnswer:
      type: object
      properties:
        count:
          type: integer
          format: int64

    ExpandedUseEntry:
      type: object
      properties:
        uuid:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string

    ExpandedUseEntryMap:
      type: object
      properties:
        type:
          type: string
        entries:
          type: array
          items:
            $ref: '#/components/schemas/ExpandedUseEntry'

    ExpandedUseEntryMapList:
      type: object
      properties:
        entries:
          type: array
          items:
            $ref: '#/components/schemas/ExpandedUseEntryMap'

    #########################################################################################
    ##
    ## These are endpoints that all services in the OPenWiFI stack must provide
    ##
    #########################################################################################
    AnyPayload:
      type: object
      properties:
        Document:
          type: string

    StringList:
      type: object
      properties:
        list:
          type: array
          items:
            type: string

    TagValuePair:
      type: object
      properties:
        tag:
          type: string
        value:
          type: string

    TagValuePairList:
      type: object
      properties:
        tagList:
          type: array
          items:
            $ref: '#/components/schemas/TagValuePair'

    TagIntPair:
      type: object
      properties:
        tag:
          type: string
        value:
          type: integer
          format: int64

    TagIntPairList:
      type: object
      properties:
        tagList:
          type: array
          items:
            $ref: '#/components/schemas/TagIntPair'

    SystemCommandDetails:
      type: object
      properties:
        command:
          type: string
          enum:
            - setloglevels
            - getloglevels
            - getSubSystemNames
            - getLogLevelNames
            - stats
        parameters:
          oneOf:
            - $ref: '#/components/schemas/StringList'
            - $ref: '#/components/schemas/TagValuePairList'

    SystemCommandResults:
      type: object
      oneOf:
        - $ref: '#/components/schemas/StringList'
        - $ref: '#/components/schemas/TagValuePairList'

    NoteInfo:
      type: object
      properties:
        created:
          type: integer
          format: int64
        createdBy:
          type: string
        note:
          type: string

    SystemInfoResults:
      type: object
      properties:
        version:
          type: string
        uptime:
          type: integer
          format: integer64
        start:
          type: integer
          format: integer64
        os:
          type: string
        processors:
          type: integer
        hostname:
          type: string

    Dashboard:
      type: object
      properties:
        snapshot:
          type: integer
          format: int64
        tenants:
          $ref: '#/components/schemas/TagIntPairList'

    SystemCommandSetLogLevel:
      type: object
      properties:
        command:
          type: string
          enum:
            - setloglevel
        subsystems:
          type: array
          items:
            $ref: '#/components/schemas/TagValuePair'

    SystemCommandReload:
      type: object
      properties:
        command:
          type: string
          enum:
            - reload
        subsystems:
          type: array
          items:
            type: string
            example: these are the SubSystems names retrieve with the GetSubSystemsNamesResult.

    SystemCommandGetLogLevels:
      type: object
      properties:
        command:
          type: string
          enum:
            - getloglevels

    SystemGetLogLevelsResult:
      type: object
      properties:
        taglist:
          type: array
          items:
            $ref: '#/components/schemas/TagValuePair'

    SystemCommandGetLogLevelNames:
      type: object
      properties:
        command:
          type: string
          enum:
            - getloglevelnames

    SystemCommandGetSubsystemNames:
      type: object
      properties:
        command:
          type: string
          enum:
            - getsubsystemnames

    SystemCommandGetLogLevelNamesResult:
      type: object
      properties:
        list:
          type: array
          items:
            type: string

    SystemGetSubSystemNemesResult:
      type: object
      properties:
        taglist:
          type: array
          items:
            $ref: '#/components/schemas/TagValuePair'

paths:
  /entity:
    get:
      tags:
        - Entities
      operationId: getEntities
      summary: Retrieve a list of entities
      parameters:
        - in: query
          description: Pagination start (starts at 1. If not specified, 1 is assumed)
          name: offset
          schema:
            type: integer
          required: false
        - in: query
          description: Maximum number of entries to return (if absent, no limit is assumed)
          name: limit
          schema:
            type: integer
          required: false
        - in: query
          description: Filter the results
          name: filter
          schema:
            type: string
          required: false
        - in: query
          description: Supply a list of devices comma separated
          name: select
          schema:
            type: string
            example: serial1,serial2,serial3
          required: false
        - in: query
          description: return the number of devices
          name: countOnly
          schema:
            type: boolean
          required: false

      responses:
        200:
          description: Return a list of elements
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/EntityList'
                  - $ref: '#/components/schemas/CountAnswer'

        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

  /entity/{uuid}:
    get:
      tags:
        - Entities
      operationId: getEntity
      summary: Retrieve a specific entity
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
            example: When looking for the root entity, the uuid 0000-0000-0000 must be entered.
          required: true

      responses:
        200:
          $ref: '#/components/schemas/Entity'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

    post:
      tags:
        - Entities
      operationId: createEntity
      summary: Create a specific entity
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
            example: When creating the root entity, the uuid 0000-0000-0000 must be entered. When creating a non-root entity, uuid must be 1
          required: true
      requestBody:
        description: Information used to create the new entity
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Entity'

      responses:
        200:
          $ref: '#/components/schemas/Entity'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

    put:
      tags:
        - Entities
      operationId: modifyEntity
      summary: Modify a specific entity
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
            example: When modifying the root entity, the uuid 0000-0000-0000 must be entered.
          required: true
      requestBody:
        description: Information used to modify the new entity
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Entity'

      responses:
        200:
          $ref: '#/components/schemas/Entity'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

    delete:
      tags:
        - Entities
      operationId: deleteEntity
      summary: Retrieve the list of entities
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
            example: The root entity cannot be deleted.
          required: true

      responses:
        204:
          $ref: '#/components/responses/Success'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

  /contact:
    get:
      tags:
        - Contacts
      operationId: getContacts
      summary: Retrieve a list of contacts
      parameters:
        - in: query
          description: Pagination start (starts at 1. If not specified, 1 is assumed)
          name: offset
          schema:
            type: integer
          required: false
        - in: query
          description: Maximum number of entries to return (if absent, no limit is assumed)
          name: limit
          schema:
            type: integer
          required: false
        - in: query
          description: Filter the results
          name: filter
          schema:
            type: string
          required: false
        - in: query
          description: Supply a list of contacts comma separated
          name: select
          schema:
            type: string
            example: uuid1,uuid2,uuid3
          required: false
        - in: query
          description: return the number of contacts
          name: countOnly
          schema:
            type: boolean
          required: false
        - in: query
          description: return only the UUIDs of contacts
          name: uuidOnly
          schema:
            type: boolean
          required: false

      responses:
        200:
          description: Return a list of contacts
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/ContactList'
                  - $ref: '#/components/schemas/CountAnswer'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

  /contact/{uuid}:
    get:
      tags:
        - Contacts
      operationId: getContact
      summary: Retrieve a specific contact
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: query
          name: expandInUse
          schema:
            type: boolean
          required: false

      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/Contact'
                  - $ref: '#/components/schemas/ExpandedUseEntryMapList'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

    post:
      tags:
        - Contacts
      operationId: createContact
      summary: Create a specific entity
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
      requestBody:
        description: Information used to create the new entity
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Contact'

      responses:
        200:
          $ref: '#/components/schemas/Contact'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

    put:
      tags:
        - Contacts
      operationId: modifyContact
      summary: Modify a specific contact
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
      requestBody:
        description: Information used to modify the new entity
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Contact'

      responses:
        200:
          $ref: '#/components/schemas/Contact'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

    delete:
      tags:
        - Contacts
      operationId: deleteContact
      summary: Delete a contact
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: query
          name: force
          schema:
            type: boolean
          required: true

      responses:
        204:
          $ref: '#/components/responses/Success'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

  /location:
    get:
      tags:
        - Locations
      operationId: getLocations
      summary: Retrieve a list of Locations
      parameters:
        - in: query
          description: Pagination start (starts at 1. If not specified, 1 is assumed)
          name: offset
          schema:
            type: integer
          required: false
        - in: query
          description: Maximum number of entries to return (if absent, no limit is assumed)
          name: limit
          schema:
            type: integer
          required: false
        - in: query
          description: Filter the results
          name: filter
          schema:
            type: string
          required: false
        - in: query
          description: Supply a list of Locations comma separated
          name: select
          schema:
            type: string
            example: uuid1,uuid2,uuid3
          required: false
        - in: query
          description: return the number of Locations
          name: countOnly
          schema:
            type: boolean
          required: false
        - in: query
          description: return only the UUIDs of Locations
          name: uuidOnly
          schema:
            type: boolean
          required: false

      responses:
        200:
          description: Return a list of Locations
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/LocationList'
                  - $ref: '#/components/schemas/CountAnswer'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

  /location/{uuid}:
    get:
      tags:
        - Locations
      operationId: getLocation
      summary: Retrieve a specific location
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: query
          name: expandInUse
          schema:
            type: boolean
          required: false

      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/Location'
                  - $ref: '#/components/schemas/ExpandedUseEntryMapList'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

    post:
      tags:
        - Locations
      operationId: createLocation
      summary: Create a specific location
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
      requestBody:
        description: Information used to create the new location
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Location'

      responses:
        200:
          $ref: '#/components/schemas/Location'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

    put:
      tags:
        - Locations
      operationId: modifyLocation
      summary: Modify a specific location
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
      requestBody:
        description: Information used to modify the new location
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Location'

      responses:
        200:
          $ref: '#/components/schemas/Location'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

    delete:
      tags:
        - Locations
      operationId: deleteLocation
      summary: Delete a location
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: query
          name: force
          schema:
            type: boolean
          required: true

      responses:
        204:
          $ref: '#/components/responses/Success'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

  /inventory:
    get:
      tags:
        - Inventory
      operationId: getInventoryTags
      summary: Retrieve a specific inventory tag
      parameters:
        - in: query
          name: entity
          schema:
            type: string
            format: uuid
          required: false
        - in: query
          name: venue
          schema:
            type: string
            format: uuid
          required: false
        - in: query
          name: unassigned
          schema:
            type: boolean
          required: false
        - in: query
          name: deviceType
          schema:
            type: string
          required: false
        - in: query
          description: Pagination start (starts at 1. If not specified, 1 is assumed)
          name: offset
          schema:
            type: integer
          required: false
        - in: query
          description: Maximum number of entries to return (if absent, no limit is assumed)
          name: limit
          schema:
            type: integer
          required: false
        - in: query
          description: Filter the results
          name: filter
          schema:
            type: string
          required: false
        - in: query
          description: Supply a list of devices comma separated
          name: select
          schema:
            type: string
            example: serial1,serial2,serial3
          required: false
        - in: query
          description: only serial numbers of full device details
          name: serialOnly
          schema:
            type: boolean
          required: false
        - in: query
          description: return the number of devices
          name: countOnly
          schema:
            type: boolean
          required: false
        - in: query
          description: return extended information
          name: withExtendedInfo
          schema:
            type: boolean
          required: false
      responses:
        200:
          description: Return a list of elements
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/SerialNumberList'
                  - $ref: '#/components/schemas/InventoryTagList'
                  - $ref: '#/components/schemas/CountAnswer'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

  /inventory/{serialNumber}:
    get:
      tags:
        - Inventory
      operationId: getInventory
      summary: Retrieve a specific inventory tag
      parameters:
        - in: path
          name: serialNumber
          schema:
            type: string
            format: uuid
          required: true
      responses:
        200:
          $ref: '#/components/schemas/InventoryTag'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'
    post:
      tags:
        - Inventory
      operationId: createInventory
      summary: Create a specific Inventory
      parameters:
        - in: path
          name: serialNumber
          schema:
            type: string
            format: uuid
          required: true
      requestBody:
        description: Information used to create the new entity
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InventoryTag'

      responses:
        200:
          $ref: '#/components/schemas/InventoryTag'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

    put:
      tags:
        - Inventory
      operationId: modifyInventory
      summary: Modify a specific Inventory
      parameters:
        - in: path
          name: serialNumber
          schema:
            type: string
            format: uuid
          required: true
        - in: query
          name: unassign
          schema:
            type: boolean
          required: false
      requestBody:
        description: Information used to modify the new entity
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InventoryTag'

      responses:
        200:
          $ref: '#/components/schemas/InventoryTag'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

    delete:
      tags:
        - Inventory
      operationId: deleteInventory
      summary: Delete a specific Inventory
      parameters:
        - in: path
          name: serialNumber
          schema:
            type: string
            format: uuid
          required: true

      responses:
        204:
          $ref: '#/components/responses/Success'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

  /venue:
    get:
      tags:
        - Venues
      operationId: getVenues
      summary: Retrieve a specific Venues tag
      parameters:
        - in: query
          name: entity
          schema:
            type: string
            format: uuid
          required: false
        - in: query
          name: venue
          schema:
            type: string
            format: uuid
          required: false
        - in: query
          name: unassigned
          schema:
            type: boolean
          required: false
        - in: query
          name: deviceType
          schema:
            type: string
          required: false
        - in: query
          description: Pagination start (starts at 1. If not specified, 1 is assumed)
          name: offset
          schema:
            type: integer
          required: false
        - in: query
          description: Maximum number of entries to return (if absent, no limit is assumed)
          name: limit
          schema:
            type: integer
          required: false
        - in: query
          description: Filter the results
          name: filter
          schema:
            type: string
          required: false
        - in: query
          description: Supply a list of Venues comma separated
          name: select
          schema:
            type: string
            example: serial1,serial2,serial3
          required: false
        - in: query
          description: only serial numbers of full device details
          name: serialOnly
          schema:
            type: boolean
          required: false
        - in: query
          description: return the number of devices
          name: countOnly
          schema:
            type: boolean
          required: false

      responses:
        200:
          description: Return a list of Venues
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/VenueList'
                  - $ref: '#/components/schemas/CountAnswer'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

  /venue/{uuid}:
    get:
      tags:
        - Venues
      operationId: getVenue
      summary: Retrieve a specific venue
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true

      responses:
        200:
          $ref: '#/components/schemas/Venue'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

    post:
      tags:
        - Venues
      operationId: createVenue
      summary: Create a specific entity
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
      requestBody:
        description: Information used to create the new entity
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Venue'

      responses:
        200:
          $ref: '#/components/schemas/Venue'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

    put:
      tags:
        - Venues
      operationId: modifyVenue
      summary: Modify a specific venue
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
      requestBody:
        description: Information used to modify the new venue
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Venue'

      responses:
        200:
          $ref: '#/components/schemas/Venue'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

    delete:
      tags:
        - Venues
      operationId: deleteVenue
      summary: Delete a venue
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
            example: The root entity cannot be deleted.
          required: true

      responses:
        204:
          $ref: '#/components/responses/Success'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

  /managementPolicy:
    get:
      tags:
        - Management Policies
      operationId: getPolicies
      summary: Get a list of policies
      parameters:
        - in: query
          name: entity
          schema:
            type: string
            format: uuid
          required: false
        - in: query
          name: venue
          schema:
            type: string
            format: uuid
          required: false
        - in: query
          name: unassigned
          schema:
            type: boolean
          required: false
        - in: query
          description: Pagination start (starts at 1. If not specified, 1 is assumed)
          name: offset
          schema:
            type: integer
          required: false
        - in: query
          description: Maximum number of entries to return (if absent, no limit is assumed)
          name: limit
          schema:
            type: integer
          required: false
        - in: query
          description: Filter the results
          name: filter
          schema:
            type: string
          required: false
        - in: query
          description: Supply a list of policies comma separated
          name: select
          schema:
            type: string
            example: serial1,serial2,serial3
          required: false
        - in: query
          description: return the number of policies
          name: countOnly
          schema:
            type: boolean
          required: false

      responses:
        200:
          description: Return a list of Venues
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/ManagementPolicyList'
                  - $ref: '#/components/schemas/CountAnswer'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

  /managementPolicy/{uuid}:
    get:
      tags:
        - Management Policies
      operationId: getManagementPolicy
      summary: Retrieve a specific entity
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: query
          name: expandInUse
          schema:
            type: boolean
          required: false

      responses:
        200:
          description: Succesful retrieve a management policy
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/ManagementPolicy'
                  - $ref: '#/components/schemas/ExpandedUseEntryMapList'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

    post:
      tags:
        - Management Policies
      operationId: createManagementPolicy
      summary: Create a specific entity
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
      requestBody:
        description: Information used to create the new entity
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ManagementPolicy'

      responses:
        200:
          $ref: '#/components/schemas/ManagementPolicy'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

    put:
      tags:
        - Management Policies
      operationId: modifyManagementPolicy
      summary: Modify a specific entity
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
      requestBody:
        description: Information used to modify the new entity
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ManagementPolicy'

      responses:
        200:
          $ref: '#/components/schemas/ManagementPolicy'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

    delete:
      tags:
        - Management Policies
      operationId: deleteManagementPolicy
      summary: Retrieve the list of entities
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
            example: The root entity cannot be deleted.
          required: true

      responses:
        204:
          $ref: '#/components/responses/Success'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

  /managementRole:
    get:
      tags:
        - Management Roles
      operationId: getManagementRoles
      summary: Retrieve a list of managementRoles
      parameters:
        - in: query
          name: entity
          schema:
            type: string
            format: uuid
          required: false
        - in: query
          description: Pagination start (starts at 1. If not specified, 1 is assumed)
          name: offset
          schema:
            type: integer
          required: false
        - in: query
          description: Maximum number of entries to return (if absent, no limit is assumed)
          name: limit
          schema:
            type: integer
          required: false
        - in: query
          description: Filter the results
          name: filter
          schema:
            type: string
          required: false
        - in: query
          description: Supply a list of devices comma separated
          name: select
          schema:
            type: string
            example: serial1,serial2,serial3
          required: false
        - in: query
          description: return the number of roles
          name: countOnly
          schema:
            type: boolean
          required: false

      responses:
        200:
          description: Return a list of elements
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/ManagementRoleList'
                  - $ref: '#/components/schemas/CountAnswer'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

  /managementRole/{uuid}:
    get:
      tags:
        - Management Roles
      operationId: getManagementRole
      parameters:
        - in: path
          name: uuid
          required: true
          schema:
            type: string
            format: uuid
        - in: query
          name: expandInUse
          schema:
            type: boolean
          required: false
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/ManagementRole'
                  - $ref: '#/components/schemas/ExpandedUseEntryMapList'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
        - Management Roles
      operationId: deleteManagementRole
      parameters:
        - in: path
          name: uuid
          required: true
          schema:
            type: string
            format: uuid
      responses:
        204:
          $ref: '#/components/responses/Success'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'
    post:
      tags:
        - Management Roles
      operationId: createManagementRole
      parameters:
        - in: path
          name: uuid
          required: true
          schema:
            type: string
            format: uuid
            example: during creation, must be set to 1. The real uuid will be returned in the created object
      requestBody:
        description: Information used to create management role
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ManagementRole'

      responses:
        200:
          $ref: '#/components/schemas/ManagementRole'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

    put:
      tags:
        - Management Roles
      operationId: modifyManagementRole
      parameters:
        - in: path
          name: uuid
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        description: Information used to modify management role
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ManagementRole'

      responses:
        200:
          $ref: '#/components/schemas/ManagementRole'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

  /configurations:
    get:
      tags:
        - Configurations
      operationId: getConfigurations
      summary: Retrieve a list of entities
      parameters:
        - in: query
          description: Pagination start (starts at 1. If not specified, 1 is assumed)
          name: offset
          schema:
            type: integer
          required: false
        - in: query
          description: Maximum number of entries to return (if absent, no limit is assumed)
          name: limit
          schema:
            type: integer
          required: false
        - in: query
          description: Filter the results
          name: filter
          schema:
            type: string
          required: false
        - in: query
          description: Supply a list of devices comma separated
          name: select
          schema:
            type: string
            example: serial1,serial2,serial3
          required: false
        - in: query
          description: return the number of devices
          name: countOnly
          schema:
            type: boolean
          required: false

      responses:
        200:
          description: Return a list of elements
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/DeviceConfigurationList'
                  - $ref: '#/components/schemas/CountAnswer'

        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

  /configurations/{uuid}:
    get:
      tags:
        - Configurations
      operationId: geConfiguration
      summary: Retrieve a specific Configuration
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
            example: When looking for the root entity, the uuid 0000-0000-0000 must be entered.
          required: true
        - in: query
          name: expandInUse
          schema:
            type: boolean
          required: false

      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/DeviceConfiguration'
                  - $ref: '#/components/schemas/ExpandedUseEntryMapList'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

    post:
      tags:
        - Configurations
      operationId: createConfiguration
      summary: Create a specific configuration
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
            example: When creating the root entity, the uuid 0000-0000-0000 must be entered. When creating a non-root entity, uuid must be 1
          required: true
        - in: query
          name: validateOnly
          schema:
            type: boolean
          required: false
      requestBody:
        description: Information used to create the new entity
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeviceConfiguration'

      responses:
        200:
          $ref: '#/components/schemas/DeviceConfiguration'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

    put:
      tags:
        - Configurations
      operationId: modifyConfiguration
      summary: Modify a specific configuration
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
            example: When modifying the root entity, the uuid 0000-0000-0000 must be entered.
          required: true
      requestBody:
        description: Information used to modify the new entity
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeviceConfiguration'

      responses:
        200:
          $ref: '#/components/schemas/DeviceConfiguration'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

    delete:
      tags:
        - Configurations
      operationId: deleteConfiguration
      summary: Retrieve the list of entities
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
            example: The root entity cannot be deleted.
          required: true

      responses:
        204:
          $ref: '#/components/responses/Success'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'




  #########################################################################################
  ##
  ## These are endpoints that all services in the OpenWiFi stack must provide
  ##
  #########################################################################################
  /dashboard:
    get:
      tags:
        - Dashboards
      summary: Get the last version of the dashboard
      operationId: getDeviceDashboard
      responses:
        200:
          $ref: '#/components/schemas/Dashboard'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'

  /system:
    post:
      tags:
        - System Commands
      summary: Perform some system wide commands
      operationId: systemCommand
      requestBody:
        description: Command details
        content:
          application/json:
            schema:
              oneOf:
                - $ref: '#/components/schemas/SystemCommandSetLogLevel'
                - $ref: '#/components/schemas/SystemCommandReload'
                - $ref: '#/components/schemas/SystemCommandGetLogLevels'
                - $ref: '#/components/schemas/SystemCommandGetLogLevelNames'
                - $ref: '#/components/schemas/SystemCommandGetSubsystemNames'
      responses:
        200:
          description: Successfull command execution
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/SystemGetLogLevelsResult'
                  - $ref: '#/components/schemas/SystemCommandGetLogLevelNamesResult'
                  - $ref: '#/components/schemas/SystemGetSubSystemNemesResult'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'
    get:
      tags:
        - System Commands
      summary: Retrieve different values from the running service.
      operationId: getSystemCommand
      parameters:
        - in: query
          description: Get a value
          name: command
          schema:
            type: string
            enum:
              - info
          required: true

      responses:
        200:
          description: Successfull command execution
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/SystemInfoResults'
        403:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'
